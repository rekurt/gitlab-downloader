
# Gitlab Downloader (RU)

`Gitlab Downloader` — это инструмент для автоматического получения и клонирования всех репозиториев из заданной группы GitLab, включая репозитории в подгруппах.
Репозитории организуются в иерархическую структуру папок, соответствующую структуре подгрупп в GitLab.

## Функционал
- Поддержка рекурсивного получения репозиториев из групп и подгрупп.
- Клонирование репозиториев через HTTPS с использованием персонального токена GitLab.
- Асинхронное клонирование для ускорения процесса.
- Создание локальной структуры папок, соответствующей структуре подгрупп в GitLab.

## Установка

### Локальная установка

1. Убедитесь, что у вас установлен Python версии 3.10 или выше.
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

### Использование через Docker

1. Соберите Docker-образ:
   ```bash
   docker build -t fetch-repositories .
   ```

2. Запустите контейнер:
   ```bash
   make docker_run
   ```

## Использование

### Локальный запуск

1. Создайте файл `.env` в корне проекта со следующими переменными:
   ```env
   GITLAB_URL=https://gitlab.com
   GITLAB_TOKEN=ваш_персональный_токен
   GITLAB_GROUP=название_группы
   CLONE_PATH=./repositories
   ```

2. Запустите скрипт:
   ```bash
   python fetch_repositories.py
   ```

### Через Docker

1. Убедитесь, что `.env` файл доступен.
2. Используйте Makefile для сборки и запуска контейнера:
   ```bash
   make docker_run
   ```

## Как получить токен GitLab

Для получения персонального токена GitLab:
1. Войдите в свой аккаунт GitLab.
2. Перейдите в настройки пользователя (**Settings**).
3. Выберите раздел **Access Tokens** или используйте [эту ссылку](https://gitlab.com/-/profile/personal_access_tokens).
4. Укажите имя токена, срок действия (опционально) и отметьте права:
   - `read_api` — для чтения через API.
   - `read_repository` — для доступа к репозиториям.
5. Нажмите **Create personal access token** и сохраните токен.

## Файлы

- `fetch_repositories.py`: Основной скрипт для получения и клонирования репозиториев.
- `Dockerfile`: Файл для сборки Docker-образа.
- `Makefile`: Автоматизация сборки и запуска контейнера.
- `requirements.txt`: Список зависимостей.

## Требования

- Python 3.10+
- Docker (для запуска в контейнере)
- Персональный токен GitLab с правами доступа к API

## Сценарии использования

### Клонирование репозиториев из группы

1. Укажите переменные среды в `.env` или передайте их через командную строку.
2. Запустите скрипт для клонирования всех репозиториев, включая подгруппы.

### Асинхронное клонирование

Скрипт автоматически обрабатывает несколько репозиториев одновременно, что сокращает общее время клонирования.

### Использование в CI/CD

Интегрируйте инструмент в процессы CI/CD, чтобы автоматически обновлять локальные копии репозиториев.

## Лицензия

Проект распространяется под лицензией MIT. Используйте свободно.
